!function(a){"use strict";function b(a){a.interceptors.push("captchaHttpInterceptor")}function c(){var b={},c={captchaEndpoint:""};return{setSettings:function(a){b=a},$get:function(){return a.extend(c,b),c}}}function d(){return function(a){return a.replace(/\/+$/g,"")}}function e(a){return{trim:function(a){return a.replace(/^\s+|\s+$/g,"")},buildUrl:function(a,b){var c=[];for(var d in b)"string"==typeof d&&c.push(d+"="+b[d]);return/\?+/g.test(a)?a+"&"+c.join("&"):a+"?"+c.join("&")},scriptInclude:function(b,c){var d=a.document.createElement("script");return d.src=b,d.className=c,d}}}function f(){return{request:function(a){return a.beforeSend&&a.beforeSend(),a}}}function g(b,c,d,e,f,g){return{restrict:"E",link:function(h,i,j){var k=j.stylename?j.stylename:"defaultCaptcha";c.captchaStyleName=k;var l=e("captchaEndpointFilter")(g.trim(f.captchaEndpoint)),m=b.find("body")[0];d({method:"GET",url:l,params:{get:"html",c:k},beforeSend:function(){if(0===b[0].getElementsByClassName("BDC_ScriptInclude").length){var c=g.buildUrl(l,{get:"script-include"});a.element(m).append(g.scriptInclude(c,"BDC_ScriptInclude"))}var d=b[0].getElementsByClassName("BDC_InitScriptInclude");0!==d.length&&d[0].parentNode.removeChild(d[0])}}).then(function(b){var c=b.data.replace(/<script.*<\/script>/g,"");i.html(c);var d=g.buildUrl(l,{get:"init-script-include",c:k,t:i[0].querySelector("#BDC_VCID_"+k).value,cs:"200"});a.element(m).append(g.scriptInclude(d,"BDC_InitScriptInclude"))},function(a){throw new Error(a.data)})}}}function h(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){var f,g,h=e;h.$setValidity("incorrectCaptcha",!1),c.bind("blur",function(){(g=c.val())&&(f||(f=new a),f.validate(g).then(function(a){a?h.$setValidity("incorrectCaptcha",!0):(h.$setValidity("incorrectCaptcha",!1),f.reloadImage())}))})}}}function i(a,b){var c=function(){if("undefined"==typeof BotDetect)throw new Error('Can not create Captcha instance, please put "new Captcha()" inside function that will be invoked after form is submitted.');this.captchaStyleName=a.captchaStyleName,this.captchaId=c.getBotDetectInstance().captchaId};return c.getBotDetectInstance=function(){return a.captchaStyleName?BotDetect.getInstanceByStyleName(a.captchaStyleName):null},c.prototype.validate=function(a){return b({method:"GET",url:c.getBotDetectInstance().validationUrl,params:{i:a}}).then(function(a){return a.data},function(a){return a.data})},c.prototype.reloadImage=function(){c.getBotDetectInstance().reloadImage()},c}a.module("BotDetectCaptcha",[]).config(["$httpProvider",b]).provider("captchaSettings",c).filter("captchaEndpointFilter",d).factory("captchaHelper",["$window",e]).factory("captchaHttpInterceptor",f).factory("Captcha",["$rootScope","$http",i]).directive("botdetectCaptcha",["$document","$rootScope","$http","$filter","captchaSettings","captchaHelper",g]).directive("correctCaptcha",["Captcha",h])}(window.angular);
//# sourceMappingURL=angularjs-captcha.min.js.map